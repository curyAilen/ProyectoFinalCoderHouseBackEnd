<title>{{ title }}</title>
</head>

<body class="">
  {{>header}}
  <div class="container">
    <h2>Editar Producto</h2>
    <form id="productForm" action="/products/edited/{{product._id}}" method="POST" enctype="multipart/form-data">
      <!--<input type="hidden" name="_method" value="PUT">-->


      <div class="row">
        <div class="form-group col-lg-6">
          <label for="title">Título:</label>
          <input type="text" class="form-control" id="title" name="title" placeholder="Ingrese el título"
            value="{{ product.title }}" required>
        </div>

        <div class="form-group col-lg-6">
          <label for="price">Precio:</label>
          <input type="number" class="form-control" id="price" name="price" placeholder="Ingrese el precio"
            value="{{ product.price }}" required>
        </div>

        <div class="form-group col-lg-4">
          <label for="thumbnail">URL de la Imagen:</label>
          <input type="file" class="form-control" id="thumbnail" name="thumbnail"
            placeholder="Ingrese la URL de la imagen">
        </div>

        <div class="form-group col-lg-4">
          <label for="code">Código:</label>
          <input type="text" class="form-control" id="code" name="code" placeholder="Ingrese el código"
            value="{{ product.code }}" required>
        </div>

        <div class="form-group col-lg-4">
          <label for="stock">Stock:</label>
          <input type="number" class="form-control" id="stock" name="stock" placeholder="Ingrese el stock"
            value="{{ product.stock }}" required>
        </div>

        <div class="form-group col-lg-6">
          <label for="description">Descripción:</label>
          <textarea class="form-control" id="description" name="description" placeholder="Ingrese la descripción"
            required>{{ product.description }}</textarea>
        </div>
      </div>
      <button type="submit" class="btn btn-primary col-lg-3">Actualizar Producto</button>
    </form>

    <form action="/products/delete/{{ product._id }}" method="POST" id="deleteForm">
      <!--<input type="hidden" name="_method" value="DELETE">-->
      <button type="submit" onclick="deleteProduct('{{ product._id }}')" class="btn btn-danger">Eliminar
        Producto</button>
    </form>

  </div>
</body>
<script>
  function deleteProduct() {
    const confirmation = confirm('¿Estás seguro de que deseas eliminar este producto?');
    if (confirmation) {
      document.getElementById('deleteForm').submit();
    }
  }
  /*document.querySelector('#delete').onclick = (e) => {
       const id = "{{ product._id }}"

       fetch(`/products/${id}`, { method: 'DELETE' })
           .then(() => {
               alert('Eliminado con exito')
               document.location.href = '/product'
           })
           .catch(e => {
               alert('No se pudo eliminar')
           })
   }*/
</script>